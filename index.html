<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shati è·æ¥­æ€§ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯ (åšç”ŸåŠ´åƒçœæº–æ‹ ç‰ˆ)</title>
    <style>
        :root {
            --primary: #4a90e2;
            --secondary: #f5f7fa;
            --accent: #ff6b6b;
            --text: #2c3e50;
            --card-bg: #ffffff;
        }

        body {
            font-family: "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN", "Hiragino Sans", sans-serif;
            background-color: #eef2f5;
            color: var(--text);
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: var(--card-bg);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
        }

        h1 {
            text-align: center;
            color: var(--text);
            font-size: 26px;
            margin-bottom: 10px;
        }

        .subtitle {
            text-align: center;
            font-size: 14px;
            color: #7f8c8d;
            margin-bottom: 40px;
        }

        /* ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¦‹å‡ºã—ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .section-header {
            margin-top: 50px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }
        
        .section-header h3 {
            margin: 0;
            color: var(--primary);
            font-size: 20px;
        }

        .section-desc {
            font-size: 13px;
            color: #666;
            margin-top: 5px;
        }

        .question-box {
            margin-bottom: 25px;
            padding: 20px;
            border-radius: 12px;
            background-color: #fafbfc;
            transition: 0.3s;
            border-left: 4px solid transparent;
        }
        
        .question-box:hover {
            background-color: #f0f4f8;
            border-left-color: var(--primary);
        }

        .question-text {
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 12px;
            color: #34495e;
        }

        .options {
            display: flex;
            flex-wrap: wrap; /* ã‚¹ãƒãƒ›ã§æŠ˜ã‚Šè¿”ã™ */
            gap: 10px;
        }

        .option-label {
            flex: 1;
            min-width: 140px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 14px;
        }

        .option-label:hover {
            border-color: var(--primary);
            background-color: #f0f7ff;
        }

        input[type="radio"] {
            margin-right: 8px;
            accent-color: var(--primary);
        }
        
        .option-label:has(input:checked) {
            border-color: var(--primary);
            background-color: #ebf5ff;
            font-weight: bold;
            color: var(--primary);
        }

        button {
            display: block;
            width: 100%;
            padding: 20px;
            background: linear-gradient(135deg, #4a90e2 0%, #357abd 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 40px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(74, 144, 226, 0.4);
        }

        /* çµæœç”»é¢ */
        #result {
            display: none;
            margin-top: 40px;
            border-top: 2px solid #eee;
            padding-top: 40px;
            animation: fadeIn 0.8s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .result-card {
            background: #fff;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            border: 2px solid;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
        }

        .type-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 50px;
            color: white;
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 15px;
            text-transform: uppercase;
        }

        .score-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .score-value {
            font-size: 42px;
            font-weight: 800;
            color: var(--text);
            line-height: 1;
        }

        .score-total {
            font-size: 14px;
            color: #95a5a6;
        }

        .advice-box {
            text-align: left;
            margin-top: 25px;
            line-height: 1.8;
            font-size: 15px;
            background: #fafafa;
            padding: 20px;
            border-radius: 10px;
        }

        .disclaimer {
            font-size: 11px;
            color: #999;
            margin-top: 40px;
            line-height: 1.5;
            text-align: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Shati è·æ¥­æ€§ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯</h1>
    <p class="subtitle">åšç”ŸåŠ´åƒçœã€Œè·æ¥­æ€§ã‚¹ãƒˆãƒ¬ã‚¹ç°¡æ˜“èª¿æŸ»ç¥¨ï¼ˆ57é …ç›®ï¼‰ã€å®Œå…¨æº–æ‹ ç‰ˆã€‚<br>ä»•äº‹ã®è² è·ã€å¿ƒèº«ã®çŠ¶æ…‹ã€å‘¨å›²ã®ã‚µãƒãƒ¼ãƒˆã‚’ç·åˆçš„ã«åˆ†æã—ã¾ã™ã€‚</p>

    <!-- ã“ã“ã«JavaScriptã§è³ªå•ãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã™ -->
    <form id="stressForm">
        <div id="questions-container"></div>
        <button type="button" onclick="calculateScore()">åˆ†æçµæœã‚’è¡¨ç¤ºã™ã‚‹</button>
    </form>

    <div id="result">
        <div id="resultCard" class="result-card">
            <span id="typeBadge" class="type-badge">TYPE</span>
            <div class="score-title" id="resultTitle">åˆ¤å®šä¸­...</div>
            <div style="margin: 15px 0;">
                <span class="score-total">ã‚¹ãƒˆãƒ¬ã‚¹åå¿œã‚¹ã‚³ã‚¢:</span>
                <span id="scoreValue" class="score-value">0</span>
                <span class="score-total">/ 116</span>
            </div>
            <div class="advice-box" id="adviceText">
                ã“ã“ã«è©³ç´°ãªåˆ†æçµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
            </div>
        </div>
    </div>

    <div class="disclaimer">
        <strong>ã€ã”åˆ©ç”¨ä¸Šã®æ³¨æ„ã€‘</strong><br>
        æœ¬ãƒ„ãƒ¼ãƒ«ã¯ã€åšç”ŸåŠ´åƒçœæ¨å¥¨ã®ã€Œè·æ¥­æ€§ã‚¹ãƒˆãƒ¬ã‚¹ç°¡æ˜“èª¿æŸ»ç¥¨ã€ã®ãƒ­ã‚¸ãƒƒã‚¯ã«åŸºã¥ãä½œæˆã•ã‚Œã¦ã„ã¾ã™ãŒã€
        ã“ã®Webã‚µã‚¤ãƒˆä¸Šã§ã®åˆ¤å®šã¯ã‚ãã¾ã§ç°¡æ˜“çš„ãªã‚»ãƒ«ãƒ•ãƒã‚§ãƒƒã‚¯ã§ã‚ã‚Šã€åŒ»å¸«ã«ã‚ˆã‚‹è¨ºæ–­ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚<br>
        çµæœã«ã‹ã‹ã‚ã‚‰ãšã€å¿ƒèº«ã®ä¸èª¿ã‚’å¼·ãæ„Ÿã˜ã‚‹å ´åˆã¯ã€åŒ»ç™‚æ©Ÿé–¢ã‚„ä¼æ¥­ã®ç”£æ¥­åŒ»ã«ã”ç›¸è«‡ãã ã•ã„ã€‚
    </div>
</div>

<script>
    // --- ãƒ‡ãƒ¼ã‚¿å®šç¾© ---
    // 57é …ç›®ã®è³ªå•ãƒ‡ãƒ¼ã‚¿
    const questions = [
        // A. ä»•äº‹ã®ã‚¹ãƒˆãƒ¬ã‚¹è¦å›  (1-17)
        { id: 1, text: "éå¸¸ã«ãŸãã•ã‚“ã®ä»•äº‹ã‚’ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„", type: "stressor" },
        { id: 2, text: "æ™‚é–“å†…ã«ä»•äº‹ãŒå‡¦ç†ã—ãã‚Œãªã„", type: "stressor" },
        { id: 3, text: "ä¸€ç”Ÿæ‡¸å‘½åƒã‹ãªã‘ã‚Œã°ãªã‚‰ãªã„", type: "stressor" },
        { id: 4, text: "ã‹ãªã‚Šæ³¨æ„ã‚’é›†ä¸­ã™ã‚‹å¿…è¦ãŒã‚ã‚‹", type: "stressor" },
        { id: 5, text: "é«˜åº¦ã®çŸ¥è­˜ã‚„æŠ€è¡“ãŒå¿…è¦ãªä»•äº‹ã ", type: "stressor" },
        { id: 6, text: "ä»•äº‹ã®ãƒšãƒ¼ã‚¹ã‚’è‡ªåˆ†ã§æ±ºã‚ã‚‰ã‚Œã‚‹", type: "control", reverse: true }, 
        { id: 7, text: "ä»•äº‹ã®é †ç•ªãƒ»æ–¹æ³•ã‚’è‡ªåˆ†ã§æ±ºã‚ã‚‰ã‚Œã‚‹", type: "control", reverse: true }, 
        { id: 8, text: "ä»•äº‹ã®æ–¹é‡ã«è‡ªåˆ†ã®æ„è¦‹ã‚’åæ˜ ã§ãã‚‹", type: "control", reverse: true }, 
        { id: 9, text: "è‡ªåˆ†ã®æŠ€èƒ½ã‚„çŸ¥è­˜ã‚’ä»•äº‹ã§ä½¿ãˆã‚‹", type: "control", reverse: true }, 
        { id: 10, text: "éƒ¨ç½²ã®ä¸­ã§æ„è¦‹ã®é£Ÿã„é•ã„ãŒã‚ã‚‹", type: "stressor" },
        { id: 11, text: "è‡ªåˆ†ã®éƒ¨ç½²ã¨ä»–ã®éƒ¨ç½²ã¨ã¯ã†ã¾ãã„ã£ã¦ã„ãªã„", type: "stressor" },
        { id: 12, text: "è·å ´ã®é›°å›²æ°—ã¯å‹å¥½çš„ã§ã‚ã‚‹", type: "environment", reverse: true }, 
        { id: 13, text: "ç§ã®è·å ´ã®ä½œæ¥­ç’°å¢ƒï¼ˆé¨’éŸ³ã€ç…§æ˜ã€æ¸©åº¦ã€æ›æ°—ãªã©ï¼‰ã¯ã‚ˆããªã„", type: "stressor" },
        { id: 14, text: "ä»•äº‹ã®å†…å®¹ã¯è‡ªåˆ†ã«åˆã£ã¦ã„ã‚‹", type: "control", reverse: true }, 
        { id: 15, text: "åƒããŒã„ã®ã‚ã‚‹ä»•äº‹ã ", type: "control", reverse: true }, 
        { id: 16, text: "èº«ä½“ã‚’å¤§å¤‰ã‚ˆãä½¿ã†ä»•äº‹ã ", type: "stressor" },
        { id: 17, text: "è‡ªåˆ†ã®ãƒšãƒ¼ã‚¹ã§ä»•äº‹ãŒã§ãã‚‹", type: "control", reverse: true }, 

        // B. å¿ƒèº«ã®ã‚¹ãƒˆãƒ¬ã‚¹åå¿œ (18-46)
        { id: 18, text: "æ´»æ°—ãŒã‚ã„ã¦ãã‚‹", type: "reaction_positive", reverse: true }, 
        { id: 19, text: "å…ƒæ°—ãŒã„ã£ã±ã„ã ", type: "reaction_positive", reverse: true }, 
        { id: 20, text: "ç”Ÿãç”Ÿãã™ã‚‹", type: "reaction_positive", reverse: true }, 
        { id: 21, text: "æ€’ã‚Šã‚’æ„Ÿã˜ã‚‹", type: "reaction_negative" },
        { id: 22, text: "å†…å¿ƒè…¹ç«‹ãŸã—ã„", type: "reaction_negative" },
        { id: 23, text: "ã‚¤ãƒ©ã‚¤ãƒ©ã—ã¦ã„ã‚‹", type: "reaction_negative" },
        { id: 24, text: "ã²ã©ãç–²ã‚ŒãŸ", type: "reaction_negative" },
        { id: 25, text: "ã¸ã¨ã¸ã¨ã ", type: "reaction_negative" },
        { id: 26, text: "ã ã‚‹ã„", type: "reaction_negative" },
        { id: 27, text: "æ°—ãŒã¯ã‚Šã¤ã‚ã¦ã„ã‚‹", type: "reaction_negative" },
        { id: 28, text: "ä¸å®‰ã ", type: "reaction_negative" },
        { id: 29, text: "è½ç€ã‹ãªã„", type: "reaction_negative" },
        { id: 30, text: "ã‚†ã†ã†ã¤ã ", type: "reaction_negative" },
        { id: 31, text: "ä½•ã‚’ã™ã‚‹ã®ã‚‚é¢å€’ã ", type: "reaction_negative" },
        { id: 32, text: "ç‰©äº‹ã«é›†ä¸­ã§ããªã„", type: "reaction_negative" },
        { id: 33, text: "æ°—åˆ†ãŒæ™´ã‚Œãªã„", type: "reaction_negative" },
        { id: 34, text: "ä»•äº‹ãŒæ‰‹ã«ã¤ã‹ãªã„", type: "reaction_negative" },
        { id: 35, text: "æ‚²ã—ã„ã¨æ„Ÿã˜ã‚‹", type: "reaction_negative" },
        { id: 36, text: "ã‚ã¾ã„ãŒã™ã‚‹", type: "reaction_body" },
        { id: 37, text: "ä½“ã®ãµã—ã¶ã—ãŒç—›ã‚€", type: "reaction_body" },
        { id: 38, text: "é ­ãŒé‡ã‹ã£ãŸã‚Šé ­ç—›ãŒã™ã‚‹", type: "reaction_body" },
        { id: 39, text: "é¦–ç­‹ã‚„è‚©ãŒã“ã‚‹", type: "reaction_body" },
        { id: 40, text: "è…°ãŒç—›ã„", type: "reaction_body" },
        { id: 41, text: "ç›®ãŒç–²ã‚Œã‚‹", type: "reaction_body" },
        { id: 42, text: "å‹•æ‚¸ã‚„æ¯åˆ‡ã‚ŒãŒã™ã‚‹", type: "reaction_body" },
        { id: 43, text: "èƒƒè…¸ã®å…·åˆãŒæ‚ªã„", type: "reaction_body" },
        { id: 44, text: "é£Ÿæ¬²ãŒãªã„", type: "reaction_body" },
        { id: 45, text: "ä¾¿ç§˜ã‚„ä¸‹ç—¢ã‚’ã™ã‚‹", type: "reaction_body" },
        { id: 46, text: "ã‚ˆãçœ ã‚Œãªã„", type: "reaction_body" },

        // C. å‘¨å›²ã®ã‚µãƒãƒ¼ãƒˆ (47-57)
        { id: 47, text: "ä¸Šå¸ã¯ã©ã®ãã‚‰ã„æ°—è»½ã«è©±ãŒã§ãã¾ã™ã‹ï¼Ÿ", type: "support", reverse: true },
        { id: 48, text: "è·å ´ã®åŒåƒšã¯ã©ã®ãã‚‰ã„æ°—è»½ã«è©±ãŒã§ãã¾ã™ã‹ï¼Ÿ", type: "support", reverse: true },
        { id: 49, text: "é…å¶è€…ã€å®¶æ—ã€å‹äººã¯ã©ã®ãã‚‰ã„æ°—è»½ã«è©±ãŒã§ãã¾ã™ã‹ï¼Ÿ", type: "support", reverse: true },
        { id: 50, text: "ä¸Šå¸ã¯ã€ã‚ãªãŸãŒå›°ã£ãŸæ™‚ã€ã©ã®ãã‚‰ã„é ¼ã‚Šã«ãªã‚Šã¾ã™ã‹ï¼Ÿ", type: "support", reverse: true },
        { id: 51, text: "è·å ´ã®åŒåƒšã¯ã€ã‚ãªãŸãŒå›°ã£ãŸæ™‚ã€ã©ã®ãã‚‰ã„é ¼ã‚Šã«ãªã‚Šã¾ã™ã‹ï¼Ÿ", type: "support", reverse: true },
        { id: 52, text: "é…å¶è€…ã€å®¶æ—ã€å‹äººã¯ã€ã‚ãªãŸãŒå›°ã£ãŸæ™‚ã€ã©ã®ãã‚‰ã„é ¼ã‚Šã«ãªã‚Šã¾ã™ã‹ï¼Ÿ", type: "support", reverse: true },
        { id: 53, text: "ä¸Šå¸ã¯ã€ã‚ãªãŸã®å€‹äººçš„ãªå•é¡Œã‚’ç›¸è«‡ã—ãŸã‚‰ã€ã©ã®ãã‚‰ã„ãã„ã¦ãã‚Œã¾ã™ã‹ï¼Ÿ", type: "support", reverse: true },
        { id: 54, text: "è·å ´ã®åŒåƒšã¯ã€ã‚ãªãŸã®å€‹äººçš„ãªå•é¡Œã‚’ç›¸è«‡ã—ãŸã‚‰ã€ã©ã®ãã‚‰ã„ãã„ã¦ãã‚Œã¾ã™ã‹ï¼Ÿ", type: "support", reverse: true },
        { id: 55, text: "é…å¶è€…ã€å®¶æ—ã€å‹äººã¯ã€ã‚ãªãŸã®å€‹äººçš„ãªå•é¡Œã‚’ç›¸è«‡ã—ãŸã‚‰ã€ã©ã®ãã‚‰ã„ãã„ã¦ãã‚Œã¾ã™ã‹ï¼Ÿ", type: "support", reverse: true },
        { id: 56, text: "ä»•äº‹ã«æº€è¶³ã—ã¦ã„ã‚‹", type: "satisfaction", reverse: true },
        { id: 57, text: "å®¶åº­ç”Ÿæ´»ã«æº€è¶³ã—ã¦ã„ã‚‹", type: "satisfaction", reverse: true }
    ];

    // --- å‡¦ç†ãƒ­ã‚¸ãƒƒã‚¯ ---

    // ç”»é¢ãƒ­ãƒ¼ãƒ‰æ™‚ã«è³ªå•ã‚’ç”Ÿæˆ
    window.onload = function() {
        const container = document.getElementById('questions-container');
        
        questions.forEach((q, index) => {
            // ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ˜ãƒƒãƒ€ãƒ¼ã®æŒ¿å…¥
            if(index === 0) {
                const header = document.createElement('div');
                header.className = 'section-header';
                header.innerHTML = `<h3>A. ä»•äº‹ã®è¦å› ã«ã¤ã„ã¦</h3><p class="section-desc">ã‚ãªãŸã®ä»•äº‹ã®çŠ¶æ³ã«ã¤ã„ã¦æ•™ãˆã¦ãã ã•ã„ã€‚</p>`;
                container.appendChild(header);
            }
            if(index === 17) {
                const header = document.createElement('div');
                header.className = 'section-header';
                header.innerHTML = `<h3>B. æœ€è¿‘ 1 ã‹æœˆé–“ã®çŠ¶æ…‹ã«ã¤ã„ã¦</h3><p class="section-desc">ã“ã“1ãƒ¶æœˆã®ã‚ãªãŸã®å¿ƒèº«ã®çŠ¶æ…‹ã«ã¤ã„ã¦æ•™ãˆã¦ãã ã•ã„ã€‚</p>`;
                container.appendChild(header);
            }
            if(index === 46) {
                const header = document.createElement('div');
                header.className = 'section-header';
                header.innerHTML = `<h3>C. å‘¨å›²ã®æ–¹ã€…ã«ã¤ã„ã¦</h3><p class="section-desc">ã‚ãªãŸã®å‘¨ã‚Šã®äººãŸã¡ã®ã‚µãƒãƒ¼ãƒˆçŠ¶æ³ã«ã¤ã„ã¦æ•™ãˆã¦ãã ã•ã„ã€‚</p>`;
                container.appendChild(header);
            }

            const div = document.createElement('div');
            div.className = 'question-box';
            
            // é¸æŠè‚¢ã®HTMLç”Ÿæˆ
            const html = `
                <div class="question-text">Q${q.id}. ${q.text}</div>
                <div class="options">
                    <label class="option-label"><input type="radio" name="q${q.id}" value="1" required> ${getLabel(index, 1)}</label>
                    <label class="option-label"><input type="radio" name="q${q.id}" value="2"> ${getLabel(index, 2)}</label>
                    <label class="option-label"><input type="radio" name="q${q.id}" value="3"> ${getLabel(index, 3)}</label>
                    <label class="option-label"><input type="radio" name="q${q.id}" value="4"> ${getLabel(index, 4)}</label>
                </div>
            `;
            div.innerHTML = html;
            container.appendChild(div);
        });
    };

    // è³ªå•ã‚¿ã‚¤ãƒ—ã«å¿œã˜ã¦é¸æŠè‚¢ã®æ–‡è¨€ã‚’è¿”ã™
    function getLabel(index, value) {
        if (index < 17) {
            // Aãƒ‘ãƒ¼ãƒˆ: ä»•äº‹ã«ã¤ã„ã¦
            const labels = ["ãã†ã ", "ã¾ã‚ãã†ã ", "ã‚„ã‚„ã¡ãŒã†", "ã¡ãŒã†"];
            return labels[value - 1];
        } else if (index < 46) {
            // Bãƒ‘ãƒ¼ãƒˆ: å¿ƒèº«ã®çŠ¶æ…‹ (å·¦ãŒé«˜ã„é »åº¦)
            const labels = ["ã»ã¨ã‚“ã©ã‚ã£ãŸ", "ã¨ãã©ãã‚ã£ãŸ", "ã—ã°ã—ã°ã‚ã£ãŸ", "ã»ã¨ã‚“ã©ãªã‹ã£ãŸ"]; 
            return labels[value - 1];
        } else {
            // Cãƒ‘ãƒ¼ãƒˆ: ã‚µãƒãƒ¼ãƒˆ
            const labels = ["éå¸¸ã«", "ã‹ãªã‚Š", "å¤šå°‘", "å…¨ããªã„"];
            return labels[value - 1];
        }
    }

    // è¨ˆç®—ã¨çµæœè¡¨ç¤º
    function calculateScore() {
        let scores = {
            stressor: 0,   // ä»•äº‹ã®è² æ‹…
            reaction: 0,   // å¿ƒèº«ã®åå¿œï¼ˆç‚¹ãŒé«˜ã„ã»ã©æ‚ªã„ï¼‰
            support: 0     // å‘¨å›²ã®ã‚µãƒãƒ¼ãƒˆï¼ˆç‚¹ãŒé«˜ã„ã»ã©æ‚ªã„ï¼ã‚µãƒãƒ¼ãƒˆãªã—ï¼‰
        };
        let answeredCount = 0;
        const form = document.getElementById('stressForm');

        // é›†è¨ˆãƒ«ãƒ¼ãƒ—
        for (let i = 0; i < questions.length; i++) {
            const q = questions[i];
            const radios = form.elements['q' + q.id];
            
            if (radios.value !== "") {
                let val = parseInt(radios.value); // 1~4
                answeredCount++;

                let point = 0;
                
                // 4ç‚¹æ³•ã¸ã®æ­£è¦åŒ– (é«˜ã„ã»ã©ã€Œæ‚ªã„/ã‚¹ãƒˆãƒ¬ã‚¹é«˜ã€ã«ã™ã‚‹)
                if (q.reverse) {
                    // é€†è»¢é …ç›®ï¼ˆä¾‹ï¼šã€Œè‡ªåˆ†ã®ãƒšãƒ¼ã‚¹ã§ã§ãã‚‹ã€ï¼‰
                    // 1(ãã†ã ) = è‰¯ã„çŠ¶æ…‹ = 1ç‚¹
                    // 4(ã¡ãŒã†) = æ‚ªã„çŠ¶æ…‹ = 4ç‚¹
                    point = val; 
                } else {
                    // é€šå¸¸é …ç›®ï¼ˆä¾‹ï¼šã€Œä»•äº‹ãŒå¤šã„ã€ï¼‰
                    // 1(ãã†ã ) = æ‚ªã„çŠ¶æ…‹ = 4ç‚¹
                    // 4(ã¡ãŒã†) = è‰¯ã„çŠ¶æ…‹ = 1ç‚¹
                    point = 5 - val;
                }

                // ã‚«ãƒ†ã‚´ãƒªæŒ¯ã‚Šåˆ†ã‘
                if (q.type === 'stressor' || q.type === 'control' || q.type === 'environment') {
                    scores.stressor += point;
                } else if (q.type.includes('reaction')) {
                    scores.reaction += point;
                } else if (q.type === 'support' || q.type === 'satisfaction') {
                    scores.support += point;
                }
            }
        }

        // æœªå›ç­”ãƒã‚§ãƒƒã‚¯
        if (answeredCount < questions.length) {
            alert(`æœªå›ç­”ã®é …ç›®ãŒã‚ã‚Šã¾ã™ï¼ˆ${answeredCount}/${questions.length}ï¼‰\nã‚ˆã‚Šæ­£ç¢ºãªè¨ºæ–­ã®ãŸã‚ã€ã™ã¹ã¦ã®è³ªå•ã«ãŠç­”ãˆãã ã•ã„ã€‚`);
            return;
        }

        showResult(scores);
    }

    function showResult(scores) {
        const resultDiv = document.getElementById('result');
        const resultCard = document.getElementById('resultCard');
        const typeBadge = document.getElementById('typeBadge');
        const resultTitle = document.getElementById('resultTitle');
        const scoreValue = document.getElementById('scoreValue');
        const adviceText = document.getElementById('adviceText');

        const reactionScore = scores.reaction; // 29é …ç›® * 4 = 116ç‚¹æº€ç‚¹
        const supportScore = scores.support;   // é«˜ã„ã»ã©å­¤ç«‹
        const stressorScore = scores.stressor; // é«˜ã„ã»ã©ä»•äº‹ãŒãã¤ã„

        // --- åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ (ç°¡æ˜“ç‰ˆåŸºæº–) ---
        // ã‚¹ãƒˆãƒ¬ã‚¹åå¿œã‚¹ã‚³ã‚¢ã«åŸºã¥ãMBTIé¢¨è¨ºæ–­
        
        let diagnosis = "";
        let color = "";
        let title = "";
        let advice = "";

        if (reactionScore < 45) {
            // éå¸¸ã«å¥å…¨
            diagnosis = "The Vitalist (ãƒã‚¤ã‚¿ãƒªã‚¹ãƒˆ)";
            color = "#27ae60"; // Green
            title = "æ´»åŠ›ã‚ãµã‚Œã‚‹ã€Œãƒã‚¤ã‚¿ãƒªã‚¹ãƒˆã€";
            advice = `
                ç¾åœ¨ã€ã‚ãªãŸã®ãƒ¡ãƒ³ã‚¿ãƒ«ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã¯<strong>éå¸¸ã«è‰¯å¥½</strong>ã§ã™ã€‚<br>
                ã€Œå¿ƒèº«ã®ã‚¹ãƒˆãƒ¬ã‚¹åå¿œã€ãŒä½ãæŠ‘ãˆã‚‰ã‚Œã¦ãŠã‚Šã€ä»•äº‹ã®ãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼ã‚’ã†ã¾ãã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã§ãã¦ã„ã¾ã™ã€‚<br><br>
                <strong>ğŸ”® ä»Šå¾Œã®æŒ‡é‡:</strong><br>
                ä»Šã®ç”Ÿæ´»ãƒªã‚ºãƒ ã‚„ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥æ–¹æ³•ã¯ã‚ãªãŸã«åˆã£ã¦ã„ã¾ã™ã€‚ã“ã®å®‰å®šæ„Ÿã‚’æ´»ã‹ã—ã€æ–°ã—ã„ã‚¹ã‚­ãƒ«ç¿’å¾—ã‚„è¶£å‘³ã¸ã®æŒ‘æˆ¦ãªã©ã€è‡ªåˆ†ã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹ã®ã«æœ€é©ãªæ™‚æœŸã§ã™ã€‚
            `;
        } else if (reactionScore < 76) {
            // é»„è‰²ä¿¡å·ï¼ˆå¹³å‡ã€œã‚„ã‚„é«˜ã‚ï¼‰
            diagnosis = "The Guardian (ã‚¬ãƒ¼ãƒ‡ã‚£ã‚¢ãƒ³)";
            color = "#f39c12"; // Orange
            title = "è²¬ä»»æ„Ÿã§è€ãˆã‚‹ã€Œã‚¬ãƒ¼ãƒ‡ã‚£ã‚¢ãƒ³ã€";
            advice = `
                ç¾åœ¨ã€ã‚ãªãŸã¯æ—¥ã€…ã®æ¥­å‹™ã‚’æ‡¸å‘½ã«ã“ãªã—ã¦ã„ã¾ã™ãŒã€<strong>çŸ¥ã‚‰ãšçŸ¥ã‚‰ãšã®ã†ã¡ã«ç–²åŠ´ãŒè“„ç©ã—ã¦ã„ã‚‹</strong>çŠ¶æ…‹ã§ã™ã€‚<br>
                ã¾ã ã€Œå€’ã‚Œã‚‹ã»ã©ã§ã¯ãªã„ã€ã¨æ„Ÿã˜ã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€èº«ä½“ã®ã‚³ãƒªã‚„ã€ãµã¨ã—ãŸæ™‚ã®ãŸã‚æ¯ãŒå¢—ãˆã¦ã„ã¾ã›ã‚“ã‹ï¼Ÿ<br><br>
                <strong>ğŸ”® ä»Šå¾Œã®æŒ‡é‡:</strong><br>
                ã“ã®æ®µéšã§ã®ã‚±ã‚¢ãŒæœ€ã‚‚é‡è¦ã§ã™ã€‚ã€Œã‚„ã‚‰ãªãã¦ã‚‚ãªã‚“ã¨ã‹ãªã‚‹ã“ã¨ã€ã‚’å‹‡æ°—ã‚’æŒã£ã¦æ¨ã¦ã€ä»Šé€±æœ«ã¯æ³¥ã®ã‚ˆã†ã«çœ ã‚‹ã‹ã€å®Œå…¨ã«ä»•äº‹ã‚’å¿˜ã‚Œã‚‹æ™‚é–“ã‚’ä½œã£ã¦ãã ã•ã„ã€‚
            `;
        } else {
            // èµ¤ä¿¡å·ï¼ˆé«˜ã‚¹ãƒˆãƒ¬ã‚¹ï¼‰
            diagnosis = "The Warrior (ã‚¦ã‚©ãƒ¼ãƒªã‚¢ãƒ¼)";
            color = "#c0392b"; // Red
            title = "æˆ¦ã„ç–²ã‚ŒãŸã€Œã‚¦ã‚©ãƒ¼ãƒªã‚¢ãƒ¼ã€";
            advice = `
                <strong>ã€è­¦å‘Šã€‘ã‚¹ãƒˆãƒ¬ã‚¹ãƒ¬ãƒ™ãƒ«ãŒå±é™ºåŸŸã«é”ã—ã¦ã„ã¾ã™ã€‚</strong><br>
                ã‚ãªãŸã¯ä»Šã€å‚·ã¤ããªãŒã‚‰ã‚‚æˆ¦å ´ã«ç«‹ã¡ç¶šã‘ã¦ã„ã‚‹çŠ¶æ…‹ã§ã™ã€‚ã‚¹ã‚³ã‚¢ã¯ã€è‡ªåŠ›ã§ã®å›å¾©ãŒé›£ã—ã„ãƒ¬ãƒ™ãƒ«ã®è² æ‹…ã‚’ç¤ºå”†ã—ã¦ã„ã¾ã™ã€‚<br>
                ã“ã‚Œä»¥ä¸Šã®ç„¡ç†ã¯ã€é•·æœŸçš„ãªå¥åº·ãƒªã‚¹ã‚¯ã«ç¹‹ãŒã‚Šã¾ã™ã€‚<br><br>
                <strong>ğŸ”® ç›´ã¡ã«è¡Œã†ã¹ãã“ã¨:</strong><br>
                1. <strong>ä¼‘é¤Šã®ç¢ºä¿:</strong> æœ‰çµ¦ä¼‘æš‡ã‚„æ¬ å‹¤ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚<br>
                2. <strong>ç›¸è«‡:</strong> ä¸Šå¸ã€äººäº‹ã€ã¾ãŸã¯å¿ƒç™‚å†…ç§‘ã¸ç›¸è«‡ã—ã¦ãã ã•ã„ã€‚<br>
                ã‚ãªãŸã¯ååˆ†ã«é ‘å¼µã‚Šã¾ã—ãŸã€‚ä»Šã¯ã€Œé€ƒã’ã‚‹ã€ã“ã¨ãŒã€Œå‹ã¤ã€ã“ã¨ã§ã™ã€‚
            `;
        }

        // è©³ç´°åˆ†æã‚³ãƒ¡ãƒ³ãƒˆã®è¿½åŠ 
        let detailAnalysis = `<br><hr style="border:0; border-top:1px dashed #ccc; margin:20px 0;">
            <strong>ğŸ“Š 3ã¤ã®è»¸ã«ã‚ˆã‚‹åˆ†æ:</strong><ul style="padding-left:20px; margin-top:10px;">`;
            
        // ä»•äº‹ã®è² è·ã«ã¤ã„ã¦
        if(stressorScore >= 50) {
            detailAnalysis += `<li><strong>ä»•äº‹ã®è² è·:</strong> éå¸¸ã«é«˜ã„ã§ã™ã€‚ç‰©ç†çš„ã«ã‚­ãƒ£ãƒ‘ã‚·ãƒ†ã‚£ã‚’è¶…ãˆã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</li>`;
        } else {
            detailAnalysis += `<li><strong>ä»•äº‹ã®è² è·:</strong> è¨±å®¹ç¯„å›²å†…ã€ã¾ãŸã¯ã†ã¾ãã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã§ãã¦ã„ã¾ã™ã€‚</li>`;
        }
        
        // ã‚µãƒãƒ¼ãƒˆã«ã¤ã„ã¦ (Cãƒ‘ãƒ¼ãƒˆã¯é€†è»¢è¨ˆç®—æ¸ˆã¿: é«˜ã„ã»ã©æ‚ªã„ï¼ã‚µãƒãƒ¼ãƒˆãªã—)
        // 9é …ç›®+2é …ç›® = 11é …ç›®ã€‚ Max 44ç‚¹ã€‚ å¹³å‡25å‰å¾Œã€‚é«˜ã„ã»ã©å­¤ç«‹ã€‚
        if(supportScore >= 28) {
            detailAnalysis += `<li><strong>å‘¨å›²ã®æ”¯æ´:</strong> <span style="color:#c0392b;">ä¸è¶³ã—ã¦ã„ã¾ã™ï¼ˆè¦æ³¨æ„ï¼‰ã€‚</span> å­¤ç«‹æ„Ÿã‚’å¼·ã‚ã¦ã„ã‚‹å¤§ããªè¦å› ã§ã™ã€‚</li>`;
        } else {
            detailAnalysis += `<li><strong>å‘¨å›²ã®æ”¯æ´:</strong> è‰¯å¥½ã§ã™ã€‚å›°ã£ãŸã¨ãã«ç›¸è«‡ã§ãã‚‹äººãŒã„ã¾ã™ã€‚</li>`;
        }
        detailAnalysis += `</ul>`;

        // çµæœã®DOMåæ˜ 
        scoreValue.textContent = reactionScore;
        resultCard.style.borderColor = color;
        resultCard.style.backgroundColor = color + "0d"; // è–„ã„èƒŒæ™¯è‰²
        typeBadge.style.backgroundColor = color;
        typeBadge.textContent = diagnosis;
        resultTitle.textContent = title;
        resultTitle.style.color = color;
        adviceText.innerHTML = advice + detailAnalysis;

        resultDiv.style.display = "block";
        resultDiv.scrollIntoView({ behavior: 'smooth' });
    }
</script>

</body>
</html>
