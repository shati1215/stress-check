<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shati ç·åˆãƒ©ã‚¤ãƒ•ã‚¹ãƒˆãƒ¬ã‚¹è¨ºæ–­</title>
    <style>
        :root {
            --primary: #8e44ad; /* ä¸€èˆ¬å‘ã‘ãªã®ã§å°‘ã—çŸ¥çš„ãªãƒ‘ãƒ¼ãƒ—ãƒ«ã«å¤‰æ›´ */
            --secondary: #f3e5f5;
            --accent: #e74c3c;
            --text: #2c3e50;
            --card-bg: #ffffff;
        }

        body {
            font-family: "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN", "Hiragino Sans", sans-serif;
            background-color: #f4f6f9;
            color: var(--text);
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: var(--card-bg);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
        }

        h1 {
            text-align: center;
            color: var(--text);
            font-size: 26px;
            margin-bottom: 10px;
        }

        .subtitle {
            text-align: center;
            font-size: 14px;
            color: #7f8c8d;
            margin-bottom: 40px;
        }

        /* ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¦‹å‡ºã— */
        .section-header {
            margin-top: 50px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }
        
        .section-header h3 {
            margin: 0;
            color: var(--primary);
            font-size: 20px;
        }

        .section-desc {
            font-size: 13px;
            color: #666;
            margin-top: 5px;
        }

        /* è³ªå•ãƒœãƒƒã‚¯ã‚¹ */
        .question-box {
            margin-bottom: 25px;
            padding: 20px;
            border-radius: 12px;
            background-color: #fafbfc;
            transition: 0.3s;
            border-left: 4px solid transparent;
        }
        
        .question-box:hover {
            background-color: #f8f0fc; /* ãƒ›ãƒãƒ¼æ™‚ã®è‰²ã‚‚èª¿æ•´ */
            border-left-color: var(--primary);
        }

        .question-text {
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 12px;
            color: #34495e;
        }

        .options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .option-label {
            flex: 1;
            min-width: 140px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 12px;
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 14px;
        }

        .option-label:hover {
            border-color: var(--primary);
            background-color: var(--secondary);
        }

        input[type="radio"] {
            margin-right: 8px;
            accent-color: var(--primary);
        }
        
        .option-label:has(input:checked) {
            border-color: var(--primary);
            background-color: var(--secondary);
            font-weight: bold;
            color: var(--primary);
        }

        button {
            display: block;
            width: 100%;
            padding: 20px;
            background: linear-gradient(135deg, #8e44ad 0%, #6c3483 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 40px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(142, 68, 173, 0.4);
        }

        /* çµæœç”»é¢ */
        #result {
            display: none;
            margin-top: 40px;
            border-top: 2px solid #eee;
            padding-top: 40px;
            animation: fadeIn 0.8s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .result-card {
            background: #fff;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            border: 2px solid;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
        }

        .type-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 50px;
            color: white;
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 15px;
            text-transform: uppercase;
        }

        .score-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .score-value {
            font-size: 42px;
            font-weight: 800;
            color: var(--text);
            line-height: 1;
        }

        .score-total {
            font-size: 14px;
            color: #95a5a6;
        }

        .advice-box {
            text-align: left;
            margin-top: 25px;
            line-height: 1.8;
            font-size: 15px;
            background: #fafafa;
            padding: 20px;
            border-radius: 10px;
        }

        .disclaimer {
            font-size: 11px;
            color: #999;
            margin-top: 40px;
            line-height: 1.5;
            text-align: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Shati ç·åˆãƒ©ã‚¤ãƒ•ã‚¹ãƒˆãƒ¬ã‚¹è¨ºæ–­</h1>
    <p class="subtitle">æ—¥å¸¸ç”Ÿæ´»ã€äººé–“é–¢ä¿‚ã€ä½“èª¿ãªã©50é …ç›®ã‹ã‚‰ã‚ãªãŸã®çŠ¶æ…‹ã‚’ç²¾å¯†åˆ†æã€‚<br>ä¸€èˆ¬å¥åº·èª¿æŸ»ç¥¨(GHQ)ç­‰ã®æ¦‚å¿µã«åŸºã¥ã„ãŸã€èª°ã§ã‚‚ä½¿ãˆã‚‹ã‚»ãƒ«ãƒ•ãƒã‚§ãƒƒã‚¯ã§ã™ã€‚</p>

    <!-- ã“ã“ã«JavaScriptã§è³ªå•ãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã™ -->
    <form id="stressForm">
        <div id="questions-container"></div>
        <button type="button" onclick="calculateScore()">è¨ºæ–­çµæœã‚’è¡¨ç¤ºã™ã‚‹</button>
    </form>

    <div id="result">
        <div id="resultCard" class="result-card">
            <span id="typeBadge" class="type-badge">TYPE</span>
            <div class="score-title" id="resultTitle">åˆ¤å®šä¸­...</div>
            <div style="margin: 15px 0;">
                <span class="score-total">ã‚¹ãƒˆãƒ¬ã‚¹è“„ç©ãƒ¬ãƒ™ãƒ«:</span>
                <span id="scoreValue" class="score-value">0</span>
                <span class="score-total">/ 100</span>
            </div>
            <div class="advice-box" id="adviceText">
                ã“ã“ã«è©³ç´°ãªåˆ†æçµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
            </div>
        </div>
    </div>

    <div class="disclaimer">
        <strong>ã€ã”åˆ©ç”¨ä¸Šã®æ³¨æ„ã€‘</strong><br>
        ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ã€å¿ƒç†å­¦çš„ãªã‚¹ãƒˆãƒ¬ã‚¹åå¿œå°ºåº¦ï¼ˆSRS-18ç­‰ï¼‰ã‚„ä¸€èˆ¬çš„è¦å› ã‚’å‚è€ƒã«ä½œæˆã•ã‚ŒãŸã‚»ãƒ«ãƒ•ãƒã‚§ãƒƒã‚¯ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚<br>
        ã€Œã†ã¤ç—…ã€ãªã©ã®è¨ºæ–­ã‚’è¡Œã†åŒ»ç™‚æ©Ÿå™¨ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚<br>
        çµæœã«ã‹ã‹ã‚ã‚‰ãšã€å¿ƒèº«ã®ä¸èª¿ãŒç¶šãå ´åˆã‚„ã€å¸Œæ­»å¿µæ…®ãŒã‚ã‚‹å ´åˆã¯ã€ç›´ã¡ã«å°‚é–€ã®åŒ»ç™‚æ©Ÿé–¢ã«ã”ç›¸è«‡ãã ã•ã„ã€‚
    </div>
</div>

<script>
    // --- ãƒ‡ãƒ¼ã‚¿å®šç¾© ---
    // ä¸€èˆ¬å‘ã‘50é …ç›®ï¼ˆè·æ¥­æ€§ã«ä¾å­˜ã—ãªã„å†…å®¹ï¼‰
    // ã‚¿ã‚¤ãƒ—: stressor(åŸå› ), physical(èº«ä½“åå¿œ), mental(å¿ƒç†åå¿œ), social(ç¤¾ä¼šãƒ»ç”Ÿæ´»)
    const questions = [
        // A. æ—¥å¸¸ã®ã‚¹ãƒˆãƒ¬ãƒƒã‚µãƒ¼ï¼ˆåŸå› ãƒ»ç’°å¢ƒï¼‰ 1-15
        { id: 1, text: "ã‚„ã‚‹ã¹ãã“ã¨ãŒå¤šã™ãã¦ã€æ™‚é–“ãŒè¶³ã‚Šãªã„ã¨æ„Ÿã˜ã‚‹", type: "stressor" },
        { id: 2, text: "é‡‘éŠ­é¢ã§ã®å¿ƒé…äº‹ã‚„ä¸å®‰ãŒã‚ã‚‹", type: "stressor" },
        { id: 3, text: "å°†æ¥ã®ã“ã¨ã«ã¤ã„ã¦è€ƒãˆã‚‹ã¨ä¸å®‰ã«ãªã‚‹", type: "stressor" },
        { id: 4, text: "å®¶æ—ã‚„ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã¨ã®é–¢ä¿‚ã«æ‚©ã¿ãŒã‚ã‚‹", type: "stressor" },
        { id: 5, text: "å‹äººã‚„çŸ¥äººã¨ã®ä»˜ãåˆã„ãŒé¢å€’ã ã¨æ„Ÿã˜ã‚‹", type: "stressor" },
        { id: 6, text: "ä»Šã®ç”Ÿæ´»ç’°å¢ƒï¼ˆé¨’éŸ³ã€åºƒã•ã€åˆ©ä¾¿æ€§ãªã©ï¼‰ã«ä¸æº€ãŒã‚ã‚‹", type: "stressor" },
        { id: 7, text: "è‡ªåˆ†ã®æ™‚é–“ãŒãªã‹ãªã‹å–ã‚Œãªã„", type: "stressor" },
        { id: 8, text: "å¥åº·çŠ¶æ…‹ã«ã¤ã„ã¦å¿ƒé…ãªã“ã¨ãŒã‚ã‚‹", type: "stressor" },
        { id: 9, text: "æ°—ã‚’ä½¿ã‚ãªã‘ã‚Œã°ãªã‚‰ãªã„ç›¸æ‰‹ãŒè¿‘ãã«ã„ã‚‹", type: "stressor" },
        { id: 10, text: "å®¶äº‹ã‚„é›‘ç”¨ã«ãŠã„ã¦ã€è‡ªåˆ†ã°ã‹ã‚Šè² æ‹…ãŒå¤§ãã„ã¨æ„Ÿã˜ã‚‹", type: "stressor" },
        { id: 11, text: "æœ€è¿‘ã€ã‚·ãƒ§ãƒƒã‚¯ãªå‡ºæ¥äº‹ã‚„å«Œãªå‡ºæ¥äº‹ãŒã‚ã£ãŸ", type: "stressor" },
        { id: 12, text: "å¤©å€™ã‚„æ°—åœ§ã®å¤‰åŒ–ã§ä½“èª¿ã‚’å´©ã—ã‚„ã™ã„", type: "stressor" },
        { id: 13, text: "SNSã‚„ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’è¦‹ã‚‹ã¨ç–²ã‚Œã‚‹ã“ã¨ãŒå¤šã„", type: "stressor" },
        { id: 14, text: "å®Œç’§ã«ã‚„ã‚‰ãªã„ã¨æ°—ãŒæ¸ˆã¾ãªã„æ€§æ ¼ã ", type: "stressor" },
        { id: 15, text: "èª°ã«ã‚‚ç›¸è«‡ã§ããªã„æ‚©ã¿ã‚’æŠ±ãˆã¦ã„ã‚‹", type: "stressor" },

        // B. èº«ä½“çš„ãªåå¿œï¼ˆä½“èª¿ï¼‰ 16-28
        { id: 16, text: "æœèµ·ããŸæ™‚ã€ç–²ã‚ŒãŒæ®‹ã£ã¦ã„ã‚‹ã¨æ„Ÿã˜ã‚‹", type: "physical" },
        { id: 17, text: "è‚©ã“ã‚Šã‚„è…°ç—›ãŒã²ã©ã„", type: "physical" },
        { id: 18, text: "é ­ç—›ãŒã—ãŸã‚Šã€é ­ãŒé‡ãæ„Ÿã˜ã‚‹ã“ã¨ãŒã‚ã‚‹", type: "physical" },
        { id: 19, text: "ç›®ãŒç–²ã‚Œã‚„ã™ã„ã€ã¾ãŸã¯ã‹ã™ã‚€", type: "physical" },
        { id: 20, text: "å‹•æ‚¸ãŒã—ãŸã‚Šã€æ¯è‹¦ã—ããªã‚‹ã“ã¨ãŒã‚ã‚‹", type: "physical" },
        { id: 21, text: "é£Ÿæ¬²ãŒãªã„ã€ã¾ãŸã¯é€†ã«é£Ÿã¹éãã¦ã—ã¾ã†", type: "physical" },
        { id: 22, text: "èƒƒè…¸ã®èª¿å­ãŒæ‚ªã„ï¼ˆèƒƒç—›ã€ä¾¿ç§˜ã€ä¸‹ç—¢ãªã©ï¼‰", type: "physical" },
        { id: 23, text: "ãªã‹ãªã‹å¯ä»˜ã‘ãªã„ã€ã¾ãŸã¯å¤œä¸­ã«ç›®ãŒè¦šã‚ã‚‹", type: "physical" },
        { id: 24, text: "ã‚ã¾ã„ã‚„ç«‹ã¡ãã‚‰ã¿ãŒã™ã‚‹", type: "physical" },
        { id: 25, text: "æ‰‹è¶³ãŒå†·ãˆã‚‹ã€ã¾ãŸã¯å†·ã‚„æ±—ã‚’ã‹ã", type: "physical" },
        { id: 26, text: "é¢¨é‚ªã‚’ã²ãã‚„ã™ã‹ã£ãŸã‚Šã€æ²»ã‚Šã«ãã„", type: "physical" },
        { id: 27, text: "ä½“ãŒã ã‚‹ãã¦ã€å‹•ãã®ãŒå„„åŠ«ã ", type: "physical" },
        { id: 28, text: "ä¼‘ã¿ã®æ—¥ã¯ä¸€æ—¥ä¸­å¯ã¦ã„ãŸã„ã¨æ„Ÿã˜ã‚‹", type: "physical" },

        // C. å¿ƒç†çš„ãªåå¿œï¼ˆãƒ¡ãƒ³ã‚¿ãƒ«ï¼‰ 29-42
        { id: 29, text: "äº›ç´°ãªã“ã¨ã§ã‚¤ãƒ©ã‚¤ãƒ©ã—ã¦ã—ã¾ã†", type: "mental" },
        { id: 30, text: "ã‚ã‘ã‚‚ãªãä¸å®‰ã«ãªã£ãŸã‚Šã€è½ã¡ç€ã‹ãªããªã‚‹", type: "mental" },
        { id: 31, text: "æ°—åˆ†ãŒæ²ˆã‚“ã§ã€æ†‚é¬±ã«ãªã‚‹ã“ã¨ãŒã‚ã‚‹", type: "mental" },
        { id: 32, text: "ä½•ã‚’ã™ã‚‹ã®ã‚‚é¢å€’ã ã¨æ„Ÿã˜ã‚‹ï¼ˆç„¡æ°—åŠ›ï¼‰", type: "mental" },
        { id: 33, text: "è‡ªåˆ†ã¯ä¾¡å€¤ã®ãªã„äººé–“ã ã¨æ„Ÿã˜ã¦ã—ã¾ã†", type: "mental" },
        { id: 34, text: "ç‰©äº‹ã«é›†ä¸­ã§ããªã„ã€ãƒŸã‚¹ãŒå¢—ãˆãŸ", type: "mental" },
        { id: 35, text: "ä»¥å‰æ¥½ã—ã‹ã£ãŸè¶£å‘³ã‚„æ´»å‹•ã«èˆˆå‘³ãŒã‚ã‹ãªã„", type: "mental" },
        { id: 36, text: "äººã¨ã®ä¼šè©±ãŒå„„åŠ«ã§ã€ä¸€äººã«ãªã‚ŠãŸã„", type: "mental" },
        { id: 37, text: "çªç„¶æ³£ããŸããªã‚‹ã“ã¨ãŒã‚ã‚‹", type: "mental" },
        { id: 38, text: "æ±ºæ–­åŠ›ãŒéˆã‚Šã€ç‰©äº‹ã‚’æ±ºã‚ã‚‰ã‚Œãªã„", type: "mental" },
        { id: 39, text: "ã€Œæ¶ˆãˆã¦ã—ã¾ã„ãŸã„ã€ã¨ãµã¨æ€ã†ã“ã¨ãŒã‚ã‚‹", type: "mental" },
        { id: 40, text: "å‘¨å›²ã®éŸ³ãŒã†ã‚‹ã•ãæ„Ÿã˜ã¦æ•æ„Ÿã«ãªã£ã¦ã„ã‚‹", type: "mental" },
        { id: 41, text: "è‡ªåˆ†ã®æ„Ÿæƒ…ã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã§ããªã„ã¨æ„Ÿã˜ã‚‹", type: "mental" },
        { id: 42, text: "å°†æ¥ã«å¯¾ã—ã¦å¸Œæœ›ãŒæŒã¦ãªã„", type: "mental" },

        // D. ç”Ÿæ´»ã®æº€è¶³ãƒ»ã‚µãƒãƒ¼ãƒˆï¼ˆé€†è»¢é …ç›®å«ã‚€ï¼‰ 43-50
        { id: 43, text: "å›°ã£ãŸã¨ãã«è©±ã‚’èã„ã¦ãã‚Œã‚‹äººãŒã„ã‚‹", type: "support", reverse: true },
        { id: 44, text: "æ¯æ—¥ã®ç”Ÿæ´»ã®ä¸­ã«æ¥½ã—ã¿ã‚„ç”ŸããŒã„ãŒã‚ã‚‹", type: "support", reverse: true },
        { id: 45, text: "ãƒªãƒ©ãƒƒã‚¯ã‚¹ã§ãã‚‹æ™‚é–“ã‚„å ´æ‰€ãŒã‚ã‚‹", type: "support", reverse: true },
        { id: 46, text: "ä»Šã®è‡ªåˆ†ã¯ã€ãŠãŠã‚€ã­å¹¸ã›ã ã¨æ€ã†", type: "support", reverse: true },
        { id: 47, text: "è¶£å‘³ã‚„å¥½ããªã“ã¨ã«æ²¡é ­ã§ãã‚‹æ™‚é–“ãŒã‚ã‚‹", type: "support", reverse: true },
        { id: 48, text: "ç¡çœ æ™‚é–“ã¯ååˆ†ã«å–ã‚Œã¦ã„ã‚‹", type: "support", reverse: true },
        { id: 49, text: "æ „é¤Šãƒãƒ©ãƒ³ã‚¹ã®è‰¯ã„é£Ÿäº‹ãŒã¨ã‚Œã¦ã„ã‚‹", type: "support", reverse: true },
        { id: 50, text: "é©åº¦ãªé‹å‹•ã‚’ã™ã‚‹ç¿’æ…£ãŒã‚ã‚‹", type: "support", reverse: true }
    ];

    // ç”»é¢ãƒ­ãƒ¼ãƒ‰æ™‚ã«è³ªå•ã‚’ç”Ÿæˆ
    window.onload = function() {
        const container = document.getElementById('questions-container');
        
        questions.forEach((q, index) => {
            // ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ˜ãƒƒãƒ€ãƒ¼ã®æŒ¿å…¥
            if(index === 0) {
                container.appendChild(createHeader("A. æ—¥å¸¸ã®ã‚¹ãƒˆãƒ¬ã‚¹åŸå› ã«ã¤ã„ã¦", "æœ€è¿‘ã®ã‚ãªãŸã®ç”Ÿæ´»ç’°å¢ƒã‚„çŠ¶æ³ã«ã¤ã„ã¦æ•™ãˆã¦ãã ã•ã„ã€‚"));
            }
            if(index === 15) {
                container.appendChild(createHeader("B. ä½“ã®èª¿å­ã«ã¤ã„ã¦", "æœ€è¿‘1ãƒ¶æœˆã®ä½“èª¿ã«ã¤ã„ã¦ã€æœ€ã‚‚å½“ã¦ã¯ã¾ã‚‹ã‚‚ã®ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚"));
            }
            if(index === 28) {
                container.appendChild(createHeader("C. å¿ƒã®çŠ¶æ…‹ã«ã¤ã„ã¦", "æœ€è¿‘1ãƒ¶æœˆã®æ°—åˆ†ã®çŠ¶æ…‹ã«ã¤ã„ã¦æ•™ãˆã¦ãã ã•ã„ã€‚"));
            }
            if(index === 42) {
                container.appendChild(createHeader("D. ç”Ÿæ´»ç¿’æ…£ã¨ã‚µãƒãƒ¼ãƒˆã«ã¤ã„ã¦", "ã‚ãªãŸã®ç”Ÿæ´»ã‚¹ã‚¿ã‚¤ãƒ«ã‚„å‘¨å›²ã®ç’°å¢ƒã«ã¤ã„ã¦æ•™ãˆã¦ãã ã•ã„ã€‚"));
            }

            const div = document.createElement('div');
            div.className = 'question-box';
            
            // é¸æŠè‚¢ã®HTMLç”Ÿæˆ
            const html = `
                <div class="question-text">Q${q.id}. ${q.text}</div>
                <div class="options">
                    <label class="option-label"><input type="radio" name="q${q.id}" value="0" required> ${getLabel(index, 0)}</label>
                    <label class="option-label"><input type="radio" name="q${q.id}" value="1"> ${getLabel(index, 1)}</label>
                    <label class="option-label"><input type="radio" name="q${q.id}" value="2"> ${getLabel(index, 2)}</label>
                    <label class="option-label"><input type="radio" name="q${q.id}" value="3"> ${getLabel(index, 3)}</label>
                </div>
            `;
            div.innerHTML = html;
            container.appendChild(div);
        });
    };

    function createHeader(title, desc) {
        const div = document.createElement('div');
        div.className = 'section-header';
        div.innerHTML = `<h3>${title}</h3><p class="section-desc">${desc}</p>`;
        return div;
    }

    // è³ªå•ã‚¿ã‚¤ãƒ—ã«å¿œã˜ã¦é¸æŠè‚¢ã®æ–‡è¨€ã‚’è¿”ã™
    function getLabel(index, value) {
        // å…¨èˆ¬çš„ã«çµ±ä¸€
        const labels = ["å…¨ããªã„", "ãŸã¾ã«ã‚ã‚‹", "ã¨ãã©ãã‚ã‚‹", "ã‚ˆãã‚ã‚‹"];
        // Dãƒ‘ãƒ¼ãƒˆï¼ˆã‚µãƒãƒ¼ãƒˆï¼‰ãªã©ã¯é »åº¦ã‚„å½“ã¦ã¯ã¾ã‚Šåº¦
        if (index >= 42) {
             const labelsD = ["å…¨ããªã„", "å°‘ã—ã‚ã‚‹", "ã¾ã‚ã‚ã‚‹", "å¤§ã„ã«ã‚ã‚‹"];
             return labelsD[value];
        }
        return labels[value];
    }

    // è¨ˆç®—ã¨çµæœè¡¨ç¤º
    function calculateScore() {
        let scores = {
            stressor: 0,   // åŸå› 
            physical: 0,   // èº«ä½“åå¿œ
            mental: 0,     // å¿ƒç†åå¿œ
            lackOfSupport: 0 // ã‚µãƒãƒ¼ãƒˆä¸è¶³åº¦ï¼ˆé«˜ã„ã»ã©æ‚ªã„ï¼‰
        };
        let answeredCount = 0;
        const form = document.getElementById('stressForm');

        // é›†è¨ˆãƒ«ãƒ¼ãƒ—
        for (let i = 0; i < questions.length; i++) {
            const q = questions[i];
            const radios = form.elements['q' + q.id];
            
            if (radios.value !== "") {
                let val = parseInt(radios.value); // 0~3
                answeredCount++;

                let point = 0;
                
                // è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯: å…¨ã¦ã€Œç‚¹æ•°ãŒé«˜ã„ï¼æ‚ªã„çŠ¶æ…‹ã€ã«çµ±ä¸€ã™ã‚‹
                if (q.reverse) {
                    // ã€Œæ¥½ã—ã¿ãŒã‚ã‚‹ã€ç­‰ã®ãƒã‚¸ãƒ†ã‚£ãƒ–é …ç›®
                    // 3(å¤§ã„ã«ã‚ã‚‹) -> 0ç‚¹ï¼ˆã‚¹ãƒˆãƒ¬ã‚¹ãªã—ï¼‰
                    // 0(å…¨ããªã„) -> 3ç‚¹ï¼ˆé«˜ã‚¹ãƒˆãƒ¬ã‚¹ï¼‰
                    point = 3 - val;
                } else {
                    // ã€Œé ­ç—›ãŒã™ã‚‹ã€ç­‰ã®ãƒã‚¬ãƒ†ã‚£ãƒ–é …ç›®
                    // 3(ã‚ˆãã‚ã‚‹) -> 3ç‚¹ï¼ˆé«˜ã‚¹ãƒˆãƒ¬ã‚¹ï¼‰
                    point = val;
                }

                // ã‚«ãƒ†ã‚´ãƒªæŒ¯ã‚Šåˆ†ã‘
                if (q.type === 'stressor') scores.stressor += point;
                else if (q.type === 'physical') scores.physical += point;
                else if (q.type === 'mental') scores.mental += point;
                else if (q.type === 'support') scores.lackOfSupport += point;
            }
        }

        // æœªå›ç­”ãƒã‚§ãƒƒã‚¯
        if (answeredCount < questions.length) {
            alert(`æœªå›ç­”ã®é …ç›®ãŒã‚ã‚Šã¾ã™ï¼ˆ${answeredCount}/${questions.length}ï¼‰\nã‚ˆã‚Šæ­£ç¢ºãªè¨ºæ–­ã®ãŸã‚ã€ã™ã¹ã¦ã®è³ªå•ã«ãŠç­”ãˆãã ã•ã„ã€‚`);
            return;
        }

        showResult(scores);
    }

    function showResult(scores) {
        const resultDiv = document.getElementById('result');
        const resultCard = document.getElementById('resultCard');
        const typeBadge = document.getElementById('typeBadge');
        const resultTitle = document.getElementById('resultTitle');
        const scoreValue = document.getElementById('scoreValue');
        const adviceText = document.getElementById('adviceText');

        // ç·åˆã‚¹ã‚³ã‚¢è¨ˆç®— (Max 150ç‚¹)
        // 50å• Ã— 3ç‚¹ = 150ç‚¹æº€ç‚¹
        const totalScore = scores.stressor + scores.physical + scores.mental + scores.lackOfSupport;
        
        // æ­£è¦åŒ–ï¼ˆ100ç‚¹æº€ç‚¹æ›ç®—ã§è¦‹ã‚„ã™ãã™ã‚‹ï¼‰
        const normalizedScore = Math.round((totalScore / 150) * 100);

        let diagnosis = "";
        let color = "";
        let title = "";
        let advice = "";

        // åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯
        if (normalizedScore <= 30) {
            // å¥å…¨
            diagnosis = "The Balanced (ãƒãƒ©ãƒ³ã‚µãƒ¼)";
            color = "#27ae60"; // Green
            title = "å¿ƒèº«å……å®Ÿã®ã€Œãƒãƒ©ãƒ³ã‚µãƒ¼ã€ã‚¿ã‚¤ãƒ—";
            advice = `
                ã‚ãªãŸã®ã‚¹ãƒˆãƒ¬ã‚¹ãƒ¬ãƒ™ãƒ«ã¯éå¸¸ã«ä½ãã€ç†æƒ³çš„ãªçŠ¶æ…‹ã§ã™ã€‚<br>
                å¿ƒã¨ä½“ã®ãƒãƒ©ãƒ³ã‚¹ãŒå–ã‚Œã¦ãŠã‚Šã€æ—¥ã€…ã®ãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼ã‚’ã†ã¾ãå—ã‘æµã›ã¦ã„ã¾ã™ã€‚<br><br>
                <strong>ğŸŒŸ ã‚¢ãƒ‰ãƒã‚¤ã‚¹:</strong><br>
                ä»Šã®ç”Ÿæ´»ãƒªã‚ºãƒ ãŒã‚ãªãŸã«åˆã£ã¦ã„ã¾ã™ã€‚ã“ã®ä½™è£•ãŒã‚ã‚‹æ™‚æœŸã«ã€æ–°ã—ã„è¶£å‘³ã‚’å§‹ã‚ãŸã‚Šã€å°†æ¥ã®è¨ˆç”»ã‚’ç«‹ã¦ã‚‹ã¨ã‚¹ãƒ ãƒ¼ã‚ºã«é€²ã‚€ã§ã—ã‚‡ã†ã€‚
            `;
        } else if (normalizedScore <= 55) {
            // æ³¨æ„
            diagnosis = "The Thinker (ã‚·ãƒ³ã‚«ãƒ¼)";
            color = "#f39c12"; // Orange
            title = "å°‘ã—ãŠç–²ã‚Œã®ã€Œã‚·ãƒ³ã‚«ãƒ¼ã€ã‚¿ã‚¤ãƒ—";
            advice = `
                æ—¥å¸¸ç”Ÿæ´»ã«å¤§ããªæ”¯éšœã¯ãªã„ã‚‚ã®ã®ã€<strong>ç›®ã«è¦‹ãˆãªã„ç–²åŠ´ã‚„ã‚¹ãƒˆãƒ¬ã‚¹ãŒè“„ç©ã—å§‹ã‚ã¦ã„ã¾ã™ã€‚</strong><br>
                ã€Œã¾ã å¤§ä¸ˆå¤«ã€ã¨æ€ã£ã¦ç„¡ç†ã‚’ç¶šã‘ã¦ã„ã¾ã›ã‚“ã‹ï¼Ÿç‰¹ã«æ°—ç–²ã‚Œã‚„ã€ç¡çœ ã®è³ªã®ä½ä¸‹ã«æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚<br><br>
                <strong>ğŸŒŸ ã‚¢ãƒ‰ãƒã‚¤ã‚¹:</strong><br>
                ä»Šå¿…è¦ãªã®ã¯ã€Œè„³ã®ä¼‘æ¯ã€ã§ã™ã€‚ã‚¹ãƒãƒ›ã‚’è¦‹ã‚‹æ™‚é–“ã‚’æ¸›ã‚‰ã—ã€ãŠé¢¨å‘‚ã«ã‚†ã£ãã‚Šæµ¸ã‹ã‚‹ãªã©ã€ã‚¢ãƒŠãƒ­ã‚°ãªæ™‚é–“ã‚’ä½œã£ã¦ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ã‚‡ã†ã€‚
            `;
        } else if (normalizedScore <= 75) {
            // è­¦å‘Š
            diagnosis = "The Struggler (ã‚¹ãƒˆãƒ©ã‚°ãƒ©ãƒ¼)";
            color = "#e74c3c"; // Red
            title = "é™ç•Œã«è¿‘ã„ã€Œã‚¹ãƒˆãƒ©ã‚°ãƒ©ãƒ¼ã€ã‚¿ã‚¤ãƒ—";
            advice = `
                <strong>ã€æ³¨æ„ã€‘ã‚¹ãƒˆãƒ¬ã‚¹ãƒ¬ãƒ™ãƒ«ãŒé«˜ã„çŠ¶æ…‹ã§ã™ã€‚</strong><br>
                å¿ƒèº«ã¨ã‚‚ã«ã€Œã„ã£ã±ã„ã„ã£ã±ã„ã€ã®ã‚µã‚¤ãƒ³ãŒå‡ºã¦ã„ã¾ã™ã€‚ã‚¤ãƒ©ã‚¤ãƒ©ã‚„ä½“èª¿ä¸è‰¯ãŒæ—¥å¸¸åŒ–ã—ã¦ã„ã¾ã›ã‚“ã‹ï¼Ÿ<br>
                ã“ã®ã¾ã¾èµ°ã‚Šç¶šã‘ã‚‹ã¨ã€ã‚¬ã‚¹æ¬ ï¼ˆãƒãƒ¼ãƒ³ã‚¢ã‚¦ãƒˆï¼‰ã‚’èµ·ã“ã™ãƒªã‚¹ã‚¯ãŒã‚ã‚Šã¾ã™ã€‚<br><br>
                <strong>ğŸŒŸ ã‚¢ãƒ‰ãƒã‚¤ã‚¹:</strong><br>
                å„ªå…ˆé †ä½ã®ä½ã„äºˆå®šã¯ã™ã¹ã¦ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ã€ã¾ãšã¯è‡ªåˆ†ã‚’ç”˜ã‚„ã‹ã—ã¦ãã ã•ã„ã€‚ä¿¡é ¼ã§ãã‚‹äººã«ã€Œè¾›ã„ã€ã¨è©±ã™ã ã‘ã§ã‚‚æ¥½ã«ãªã‚Šã¾ã™ã€‚
            `;
        } else {
            // å±é™º
            diagnosis = "The Overloaded (ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰)";
            color = "#8e44ad"; // Purple
            title = "SOSç™ºä¿¡ä¸­ã®ã€Œã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã€ã‚¿ã‚¤ãƒ—";
            advice = `
                <strong>ã€è­¦å‘Šã€‘ä¼‘æ¯ã¨ã‚±ã‚¢ãŒç›´ã¡ã«å¿…è¦ã§ã™ã€‚</strong><br>
                ã‚¹ã‚³ã‚¢ã¯å±é™ºåŸŸã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚ã‚ãªãŸã¯ä»Šã¾ã§ã€ä¸€äººã§æŠ±ãˆè¾¼ã¿ã™ãã¦é ‘å¼µã‚Šã™ãã¾ã—ãŸã€‚<br>
                ã“ã‚Œã¯ã‚ãªãŸã®å¼±ã•ã§ã¯ãªãã€è² æ‹…ãŒé‡ã™ãã‚‹ã“ã¨ã®è¨¼æ˜ã§ã™ã€‚<br><br>
                <strong>ğŸŒŸ é‡è¦ãªã‚¢ãƒ‰ãƒã‚¤ã‚¹:</strong><br>
                ã“ã‚Œä»¥ä¸Šã®ç„¡ç†ã¯ç¦ç‰©ã§ã™ã€‚å°‚é–€å®¶ï¼ˆã‚«ã‚¦ãƒ³ã‚»ãƒ©ãƒ¼ã‚„å¿ƒç™‚å†…ç§‘ï¼‰ã¸ã®ç›¸è«‡ã‚’å¼·ããŠå‹§ã‚ã—ã¾ã™ã€‚ä»Šã¯ã€Œä¼‘ã‚€ã“ã¨ã€ãŒæœ€å¤§ã®ä»•äº‹ã§ã™ã€‚
            `;
        }

        // è©³ç´°åˆ†æï¼ˆã©ã®è¦ç´ ãŒä¸€ç•ªæ‚ªã„ã‹ï¼‰
        // å„ã‚«ãƒ†ã‚´ãƒªã®æœ€å¤§ç‚¹ã«å¯¾ã™ã‚‹å‰²åˆã‚’è¨ˆç®—
        // stressor: 15*3=45, physical: 13*3=39, mental: 14*3=42, support: 8*3=24
        
        let subAdvice = `<br><hr style="border:0; border-top:1px dashed #ccc; margin:20px 0;">
            <strong>ğŸ“Š ã‚«ãƒ†ã‚´ãƒªåˆ¥åˆ†æ:</strong><ul style="padding-left:20px; margin-top:10px;">`;
        
        const r_stressor = scores.stressor / 45;
        const r_physical = scores.physical / 39;
        const r_mental = scores.mental / 42;
        const r_support = scores.lackOfSupport / 24;

        if (r_physical > 0.6) subAdvice += `<li><strong>èº«ä½“ã®ç–²ã‚Œ:</strong> <span style="color:#e74c3c">ã‹ãªã‚Šæºœã¾ã£ã¦ã„ã¾ã™ã€‚</span>ç¡çœ ã‚„ä¼‘æ¯ã‚’æœ€å„ªå…ˆã—ã¦ãã ã•ã„ã€‚</li>`;
        if (r_mental > 0.6) subAdvice += `<li><strong>å¿ƒã®ç–²ã‚Œ:</strong> <span style="color:#e74c3c">è¦æ³¨æ„ãƒ¬ãƒ™ãƒ«ã§ã™ã€‚</span>æ°—åˆ†ã®è½ã¡è¾¼ã¿ã‚„ä¸å®‰ãŒå¼·ããªã£ã¦ã„ã¾ã™ã€‚</li>`;
        if (r_stressor > 0.6) subAdvice += `<li><strong>ç’°å¢ƒã‚¹ãƒˆãƒ¬ã‚¹:</strong> å‘¨å›²ã®ç’°å¢ƒã‚„äººé–“é–¢ä¿‚ãŒå¤§ããªè² æ‹…ã«ãªã£ã¦ã„ã¾ã™ã€‚</li>`;
        if (r_support > 0.6) subAdvice += `<li><strong>å­¤ç«‹å‚¾å‘:</strong> æ‚©ã¿ã‚’å…±æœ‰ã§ãã‚‹å ´ã‚„ãƒªãƒ©ãƒƒã‚¯ã‚¹ã™ã‚‹æ™‚é–“ãŒä¸è¶³ã—ã¦ã„ã¾ã™ã€‚</li>`;
        
        if (r_physical <= 0.6 && r_mental <= 0.6 && r_stressor <= 0.6 && r_support <= 0.6) {
             subAdvice += `<li>ç‰¹å®šã®çªå‡ºã—ãŸå•é¡Œã¯è¦‹å½“ãŸã‚Šã¾ã›ã‚“ãŒã€å…¨ä½“çš„ãªãƒãƒ©ãƒ³ã‚¹ã«æ°—ã‚’ã¤ã‘ã¾ã—ã‚‡ã†ã€‚</li>`;
        }
        
        subAdvice += `</ul>`;

        // çµæœåæ˜ 
        scoreValue.textContent = normalizedScore;
        resultCard.style.borderColor = color;
        resultCard.style.backgroundColor = color + "0d";
        typeBadge.style.backgroundColor = color;
        typeBadge.textContent = diagnosis;
        resultTitle.textContent = title;
        resultTitle.style.color = color;
        adviceText.innerHTML = advice + subAdvice;

        resultDiv.style.display = "block";
        resultDiv.scrollIntoView({ behavior: 'smooth' });
    }
</script>

</body>
</html>
